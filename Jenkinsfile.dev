pipeline {
    agent any
    triggers {
        pollSCM '* * * * *'
    }
    stages {
        stage('Process Resources') {
            steps {
                sh 'npm install --prefix chat-fe'
                sh 'npm build --prefix chat-fe'
                sh 'cp chat-fe/build build/resources/main/public/.'
            }
        }
        stage('Run') {
            steps {
                sh './gradlew bootRun --stacktrace'
            }
        }
    }
}
